# TimeValue ç³»ç»Ÿä¼˜åŒ–è¯´æ˜

## ğŸ“‹ æœ¬æ¬¡ä¼˜åŒ–å†…å®¹æ¦‚è¿°

### 1. æ•°æ®åº“æ”¯æŒå‡çº§

#### æ–°å¢ MySQL 8.4.5 æ”¯æŒ
- âœ… æ·»åŠ  PyMySQL é©±åŠ¨æ”¯æŒ
- âœ… å®ç° SQLite å’Œ MySQL çµæ´»åˆ‡æ¢
- âœ… ç»Ÿä¸€æ•°æ®åº“é…ç½®ç®¡ç†
- âœ… è¿æ¥æ± ä¼˜åŒ–é…ç½®

#### é…ç½®æ–¹å¼
```env
# SQLiteæ¨¡å¼ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
DB_TYPE=sqlite

# MySQLæ¨¡å¼ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
DB_TYPE=mysql
DB_HOST=60.205.161.210
DB_PORT=3306
DB_NAME=timevalue
DB_USER=timevalue
DB_PASSWORD=sdA3GThaTaDx3h8S
```

### 2. ä»£ç æ¶æ„ä¼˜åŒ–

#### æ–°å¢å…¬å…±ç»„ä»¶æ¨¡å—

**â‘  æ•°æ®åº“é…ç½®æ¨¡å—** (`backend/config/database.py`)
```python
from config.database import DatabaseConfig, DatabaseSettings

# è‡ªåŠ¨ä»ç¯å¢ƒå˜é‡è¯»å–é…ç½®
uri = DatabaseConfig.get_database_uri_from_env()

# æ‰‹åŠ¨ç”ŸæˆMySQLè¿æ¥
uri = DatabaseConfig.get_mysql_uri(
    host='localhost',
    port=3306,
    database='timevalue',
    username='root',
    password='password'
)

# è·å–å¼•æ“é…ç½®
options = DatabaseSettings.get_engine_options()
```

**â‘¡ ç»Ÿä¸€å“åº”å·¥å…·** (`backend/utils/response.py`)
```python
from utils.response import APIResponse, require_jwt, get_current_user_id

# æˆåŠŸå“åº”
return APIResponse.success(data={'id': 1}, message='æ“ä½œæˆåŠŸ')

# é”™è¯¯å“åº”  
return APIResponse.error(message='å‚æ•°é”™è¯¯', code=400)

# åˆ†é¡µå“åº”
return APIResponse.paginated(items, total, page, per_page)

# JWTè®¤è¯è£…é¥°å™¨
@require_jwt
def protected_route():
    user_id = get_current_user_id()
    return {'user_id': user_id}

# å¼‚å¸¸å¤„ç†è£…é¥°å™¨
@handle_exceptions
def api_route():
    # è‡ªåŠ¨å¤„ç†å¼‚å¸¸å¹¶è¿”å›ç»Ÿä¸€æ ¼å¼
    pass
```

**â‘¢ æ•°æ®éªŒè¯å·¥å…·** (`backend/utils/validator.py`)
```python
from utils.validator import Validator

# éªŒè¯é‚®ç®±
valid, msg = Validator.validate_email('user@example.com')

# éªŒè¯å¯†ç 
valid, msg = Validator.validate_password('password123')

# éªŒè¯ç”¨æˆ·å
valid, msg = Validator.validate_username('username')

# éªŒè¯é‡‘é¢
valid, msg = Validator.validate_amount(100.50, min_value=0, max_value=10000)

# éªŒè¯æ—¥æœŸ
valid, msg, date_obj = Validator.validate_date('2024-01-01')

# éªŒè¯æ—¥æœŸèŒƒå›´
valid, msg = Validator.validate_date_range(start_date, end_date)

# éªŒè¯å¿…å¡«å­—æ®µ
valid, msg = Validator.validate_required(value, 'ç”¨æˆ·å')

# éªŒè¯å­—ç¬¦ä¸²é•¿åº¦
valid, msg = Validator.validate_length(value, 'æè¿°', min_length=10, max_length=500)

# éªŒè¯æšä¸¾å€¼
valid, msg = Validator.validate_enum(status, 'çŠ¶æ€', ['active', 'inactive'])
```

### 3. å‰ç«¯é¡µé¢ä¼˜åŒ–

#### å›ºå®šèµ„äº§ç»Ÿè®¡é¡µé¢ (`/assets`)
- ğŸ¨ **æ¸å˜è‰²å¡ç‰‡è®¾è®¡**ï¼š4ç§ä¸»é¢˜æ¸å˜è‰²ï¼ˆç´«ã€ç²‰ã€è“ã€æ©™ï¼‰
- ğŸ“Š **å¤šç»´åº¦å¯è§†åŒ–**ï¼š
  - æ€»ä½“æ¦‚è§ˆï¼šèµ„äº§æ€»æ•°ã€åŸå€¼ã€å½“å‰ä»·å€¼ã€ç´¯è®¡æŠ˜æ—§
  - èµ„äº§å¥åº·åº¦ï¼šç¯å½¢å›¾å±•ç¤º
  - ä»·å€¼ä¿å€¼ç‡ï¼šç™¾åˆ†æ¯”å¯è§†åŒ–
  - æ•´ä½“æŠ˜æ—§è¿›åº¦ï¼š20pxç²—è¿›åº¦æ¡
- ğŸ† **çŠ¶æ€åˆ†å¸ƒ**ï¼šä½¿ç”¨ä¸­ã€é—²ç½®ã€ç»´ä¿®ä¸­ã€å·²å¤„ç½®
- ğŸ“ **åˆ†ç±»åˆ†å¸ƒ**ï¼š8ç§æ¸å˜é…è‰²ï¼Œæ˜¾ç¤ºå æ¯”è¿›åº¦æ¡

#### è™šæ‹Ÿèµ„äº§ç»Ÿè®¡é¡µé¢ (`/virtual-assets`)
- ğŸ’¨ **éšé£è€Œé€ä¸»é¢˜**ï¼šé’ˆå¯¹è™šæ‹Ÿæ¶ˆè€—å‹èµ„äº§
- âš ï¸ **é£é™©é¢„è­¦ç³»ç»Ÿ**ï¼š
  - å³å°†è¿‡æœŸé¡¹ç›®ï¼ˆ30å¤©å†…ï¼‰
  - å¼‚å¸¸æ¶ˆè€—é¡¹ç›®ï¼ˆæ¶ˆè€—è¿›åº¦>70%ï¼Œæ—¶é—´è¿›åº¦<50%ï¼‰
- ğŸ“Š **æ¶ˆè€—åˆ†æ**ï¼š
  - æ€»ä½“æ¶ˆè€—è¿›åº¦
  - æ¶ˆè€—ç‡ç¯å½¢å›¾
  - ä»·å€¼ä¿æœ‰ç‡åˆ†æ
- ğŸ¯ **4ä¸ªTabé¡µ**ï¼š
  - æ€»ä½“æ¦‚è§ˆ
  - çŠ¶æ€åˆ†å¸ƒ
  - åˆ†ç±»åˆ†å¸ƒ
  - é£é™©è­¦å‘Š

### 4. è·¯ç”±ä¼˜åŒ–

| æ—§è·¯ç”± | æ–°è·¯ç”± | è¯´æ˜ |
|--------|--------|------|
| `/projects` | `/virtual-assets` | æ›´è´´è¿‘è™šæ‹Ÿèµ„äº§æ¦‚å¿µ |

### 5. æ•°æ®åº“åˆå§‹åŒ–ä¼˜åŒ–

**æ–°å¢æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬** (`backend/init_db.py`)
```bash
# ä¸€é”®åˆå§‹åŒ–æ•°æ®åº“
python init_db.py
```

åŠŸèƒ½ï¼š
- âœ… è‡ªåŠ¨åˆ›å»ºæ‰€æœ‰æ•°æ®è¡¨
- âœ… åˆ›å»ºé»˜è®¤ç®¡ç†å‘˜ç”¨æˆ·ï¼ˆadmin/admin123ï¼‰
- âœ… åˆå§‹åŒ–é»˜è®¤åˆ†ç±»ä½“ç³»
- âœ… æ¸…æ™°çš„è¿›åº¦æç¤º

### 6. ç¯å¢ƒå˜é‡é…ç½®ä¼˜åŒ–

**æ–°çš„ `.env` é…ç½®ç»“æ„**ï¼š
```env
# Flaskç¯å¢ƒ
FLASK_ENV=development
FLASK_DEBUG=True

# æ•°æ®åº“ç±»å‹
DB_TYPE=sqlite  # æˆ– mysql

# MySQLé…ç½®ï¼ˆDB_TYPE=mysqlæ—¶ä½¿ç”¨ï¼‰
DB_HOST=60.205.161.210
DB_PORT=3306
DB_NAME=timevalue
DB_USER=timevalue
DB_PASSWORD=sdA3GThaTaDx3h8S

# å®‰å…¨å¯†é’¥
SECRET_KEY=your-secret-key
JWT_SECRET_KEY=your-jwt-secret

# JWTé…ç½®
JWT_ACCESS_TOKEN_EXPIRES=False

# CORSé…ç½®
CORS_ORIGINS=http://localhost:3000,http://127.0.0.1:3000
```

## ğŸ”§ ä½¿ç”¨æŒ‡å—

### å¿«é€Ÿå¼€å§‹

1. **å…‹éš†é¡¹ç›®**
```bash
git clone https://codeup.aliyun.com/670f88349d3c82efe37b1105/timevalue.git
cd timevalue
```

2. **å®‰è£…åç«¯ä¾èµ–**
```bash
cd backend
pip install -r requirements.txt
```

3. **é…ç½®æ•°æ®åº“**
```bash
# å¤åˆ¶é…ç½®æ–‡ä»¶
cp .env.example .env

# ç¼–è¾‘.envæ–‡ä»¶ï¼Œé€‰æ‹©æ•°æ®åº“ç±»å‹
# SQLite: DB_TYPE=sqlite
# MySQL: DB_TYPE=mysqlå¹¶é…ç½®è¿æ¥ä¿¡æ¯
```

4. **åˆå§‹åŒ–æ•°æ®åº“**
```bash
python init_db.py
```

5. **å¯åŠ¨åç«¯æœåŠ¡**
```bash
python app.py
```

6. **å®‰è£…å‰ç«¯ä¾èµ–å¹¶å¯åŠ¨**
```bash
cd ../frontend
npm install
npm run dev
```

7. **è®¿é—®ç³»ç»Ÿ**
- å‰ç«¯åœ°å€ï¼šhttp://localhost:3000
- åç«¯APIï¼šhttp://localhost:5000
- é»˜è®¤è´¦å·ï¼šadmin / admin123

### MySQL éƒ¨ç½²æ³¨æ„äº‹é¡¹

1. **ç¡®ä¿MySQLæœåŠ¡å™¨å…è®¸è¿œç¨‹è¿æ¥**
```sql
-- æˆæƒè¿œç¨‹è®¿é—®
GRANT ALL PRIVILEGES ON timevalue.* TO 'timevalue'@'%' IDENTIFIED BY 'password';
FLUSH PRIVILEGES;

-- æˆ–è€…åªå…è®¸ç‰¹å®šIP
GRANT ALL PRIVILEGES ON timevalue.* TO 'timevalue'@'your-ip' IDENTIFIED BY 'password';
FLUSH PRIVILEGES;
```

2. **åˆ›å»ºæ•°æ®åº“**
```sql
CREATE DATABASE timevalue CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

3. **æ£€æŸ¥é˜²ç«å¢™è®¾ç½®**
```bash
# å¼€æ”¾3306ç«¯å£
firewall-cmd --permanent --add-port=3306/tcp
firewall-cmd --reload
```

## ğŸ“¦ æ–°å¢ä¾èµ–

### Pythonåç«¯
```txt
PyMySQL==1.1.2        # MySQLæ•°æ®åº“é©±åŠ¨
cryptography==41.0.7  # åŠ å¯†æ”¯æŒ
```

### å®‰è£…å‘½ä»¤
```bash
pip install PyMySQL cryptography
```

## ğŸ¨ UI/UX æ”¹è¿›

### ç»Ÿè®¡é¡µé¢è®¾è®¡è§„èŒƒ

1. **é¢œè‰²æ–¹æ¡ˆ**
   - ç´«è‰²ç³»ï¼š`#667eea` â†’ `#764ba2`
   - ç²‰è‰²ç³»ï¼š`#f093fb` â†’ `#f5576c`
   - è“è‰²ç³»ï¼š`#4facfe` â†’ `#00f2fe`
   - æ©™è‰²ç³»ï¼š`#fa709a` â†’ `#fee140`

2. **å¡ç‰‡è®¾è®¡**
   - åœ†è§’ï¼š12px
   - é˜´å½±ï¼š`0 8px 16px rgba(102, 126, 234, 0.3)`
   - æ‚¬åœæ•ˆæœï¼šæ”¯æŒ

3. **è¿›åº¦æ¡**
   - ç²—ç»†ï¼š20pxï¼ˆä¸»è¿›åº¦æ¡ï¼‰
   - æ¸å˜è‰²ï¼šä¸å¡ç‰‡ä¸»é¢˜è‰²ä¸€è‡´
   - åŠ¨ç”»ï¼šå¹³æ»‘è¿‡æ¸¡

4. **ç¯å½¢å›¾**
   - å°ºå¯¸ï¼š150px
   - çº¿å®½ï¼š10px
   - æ¸å˜ï¼šåŒè‰²æ¸å˜

## ğŸš€ æ€§èƒ½ä¼˜åŒ–

1. **æ•°æ®åº“è¿æ¥æ± **
   - æ± å¤§å°ï¼š10
   - æœ€å¤§æº¢å‡ºï¼š20
   - è¿æ¥å›æ”¶ï¼š3600ç§’
   - é¢„pingæ£€æµ‹ï¼šå¯ç”¨

2. **Reactç»„ä»¶ä¼˜åŒ–**
   - ä½¿ç”¨ `useMemo` ç¼“å­˜ç»Ÿè®¡è®¡ç®—
   - é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“
   - ç»Ÿä¸€çŠ¶æ€ç®¡ç†

3. **APIå“åº”ä¼˜åŒ–**
   - ç»Ÿä¸€å“åº”æ ¼å¼
   - é”™è¯¯å¤„ç†æ ‡å‡†åŒ–
   - å‡å°‘å†—ä½™æ•°æ®ä¼ è¾“

## ğŸ“ ä»£ç è§„èŒƒ

### å‘½åè§„èŒƒ
- Pythonï¼šsnake_case
- JavaScriptï¼šcamelCase
- ç»„ä»¶ï¼šPascalCase
- å¸¸é‡ï¼šUPPER_CASE

### æ–‡ä»¶ç»„ç»‡
```
backend/
â”œâ”€â”€ config/          # é…ç½®æ¨¡å—
â”œâ”€â”€ models/          # æ•°æ®æ¨¡å‹
â”œâ”€â”€ routes/          # APIè·¯ç”±
â”œâ”€â”€ services/        # ä¸šåŠ¡é€»è¾‘
â”œâ”€â”€ utils/           # å·¥å…·å‡½æ•°
â””â”€â”€ workflows/       # AIå·¥ä½œæµ

frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/  # å…¬å…±ç»„ä»¶
â”‚   â”œâ”€â”€ pages/       # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ services/    # APIæœåŠ¡
â”‚   â””â”€â”€ utils/       # å·¥å…·å‡½æ•°
```

## ğŸ› å·²çŸ¥é—®é¢˜

1. **MySQLè¿œç¨‹è¿æ¥**
   - éœ€è¦é…ç½®MySQLæœåŠ¡å™¨å…è®¸è¿œç¨‹IPè®¿é—®
   - é”™è¯¯ä¿¡æ¯ï¼š`Host 'xxx' is not allowed to connect`
   - è§£å†³æ–¹æ¡ˆï¼šè§ä¸Šæ–‡"MySQLéƒ¨ç½²æ³¨æ„äº‹é¡¹"

2. **å‰ç«¯å¯åŠ¨é—®é¢˜**
   - å¦‚æœ `npm start` å¤±è´¥ï¼Œä½¿ç”¨ `npm run dev`
   - ç¡®ä¿Node.jsç‰ˆæœ¬ >= 16

## ğŸ“š å‚è€ƒæ–‡æ¡£

- [Flaskæ–‡æ¡£](https://flask.palletsprojects.com/)
- [SQLAlchemyæ–‡æ¡£](https://docs.sqlalchemy.org/)
- [Reactæ–‡æ¡£](https://react.dev/)
- [Ant Designæ–‡æ¡£](https://ant.design/)
- [PyMySQLæ–‡æ¡£](https://pymysql.readthedocs.io/)

---

**æ›´æ–°æ—¶é—´**ï¼š2024-11-30  
**ç‰ˆæœ¬**ï¼šv2.0  
**ä½œè€…**ï¼šå­šæ™®ç§‘æŠ€ï¼ˆåŒ—äº¬ï¼‰æœ‰é™å…¬å¸
