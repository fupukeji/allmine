# 现金价值计算器软件开发需求提示词
## 一、软件核心定位
开发一款**按时间消耗型资产/会员的现金价值计算工具**，核心解决“预付费租约类产品（如年付会员、年卡）的已消耗成本&剩余价值量化”问题，适用于飞书会员、健身房年卡、软件订阅等场景，帮助用户直观掌握资产时间损耗对应的金钱价值变化，支持部署在服务器Docker容器内。


## 二、核心功能需求
### 1. 核心计算功能（核心逻辑）
基于“时间消耗=价值消耗”原则，自动计算以下数据，支持实时刷新（默认以系统当前时间为计算节点，也可手动指定“当前计算基准时间”）：
- 单位时间成本：`总支付金额 ÷ 有效时长（结束时间 - 开始计算时间，单位：天/小时，用户可选择时间粒度）`
- 已消耗成本：`单位时间成本 × 已使用时长（当前基准时间 - 开始计算时间，若未到开始计算时间则为0）`
- 剩余价值：`总支付金额 - 已消耗成本（若超过结束时间则为0）`
- 消耗进度：`（已使用时长 ÷ 有效时长）× 100%`


### 2. 项目管理功能
支持用户添加、编辑、删除、筛选“待计算的预付费项目”，每个项目需包含以下操作：
- **添加项目**：录入项目关键信息（字段见“三、数据字段定义”），提交后自动触发价值计算
- **编辑项目**：支持修改任意字段（如总金额、结束时间），修改后实时重新计算结果
- **删除项目**：支持单个/批量删除，删除前需二次确认
- **筛选项目**：按“分类”（如运动类、技术类）筛选，也可按“剩余价值高低”“消耗进度”排序


### 3. 分类管理功能
支持用户自定义项目分类，满足个性化归类需求：
- **添加分类**：自定义分类名称（如“运动类”“技术工具类”“无形资产类”“生活服务类”）、可选分类图标/颜色（简化设计可暂用文字标识）
- **编辑分类**：修改分类名称、图标/颜色
- **删除分类**：删除前需检查是否有项目关联，若有关联需提示“请先将关联项目转移至其他分类”


## 三、数据字段定义（项目&分类）
### 1. 项目数据字段（必填/可选标注）
| 字段名称         | 字段说明                                                                 | 数据类型       | 是否必填 | 备注                                                                 |
|------------------|--------------------------------------------------------------------------|----------------|----------|----------------------------------------------------------------------|
| 项目名称         | 标识项目（如“飞书企业会员年付”“XX健身房年卡”）                           | 文本           | 是       | 支持20字以内                                                         |
| 所属分类         | 关联自定义分类                                                           | 下拉选择（关联分类表） | 是       | 若未创建分类，默认显示“未分类”                                       |
| 总支付金额       | 项目的总预付费金额                                                       | 数字（支持小数，保留2位） | 是       | 单位默认“元”，暂不支持多币种                                         |
| 购买时间         | 实际付款的时间                                                           | 日期时间选择器（YYYY-MM-DD HH:MM） | 否       | 仅作备注，不参与计算（计算以“开始计算时间”为准）                     |
| 开始计算时间     | 项目开始消耗价值的时间（如会员开通时间、年卡激活时间）                   | 日期时间选择器（YYYY-MM-DD HH:MM） | 是       | 若早于当前时间，从该时间开始计算已消耗时长；若晚于当前时间，暂不计算 |
| 结束时间         | 项目价值耗尽的时间（如会员到期时间、年卡截止时间）                       | 日期时间选择器（YYYY-MM-DD HH:MM） | 是       | 需晚于“开始计算时间”                                                 |
| 购买目的         | 备注项目用途（如“团队协作办公”“健身锻炼”）                               | 文本           | 否       | 支持50字以内，仅作备注查看                                           |
| 项目状态         | 标记项目当前阶段                                                         | 自动生成（无需用户填写） | -        | 可选状态：未开始（未到开始计算时间）、消耗中、已过期（超过结束时间） |


### 2. 分类数据字段
| 字段名称         | 字段说明                                                                 | 数据类型       | 是否必填 |
|------------------|--------------------------------------------------------------------------|----------------|----------|
| 分类名称         | 自定义分类标识（如“运动类”“技术类”）                                     | 文本           | 是       | 支持10字以内，不可重复                                               |
| 分类标识（ID）   | 分类的唯一标识                                                           | 系统自动生成（如“category_001”） | -        | 用于接口调用和数据关联                                               |


## 四、UI设计要求（简洁实用型）
整体风格简洁，无需复杂视觉设计，聚焦“功能可用”，页面可分为3个核心模块：
1. **顶部导航栏**：显示软件名称（如“现金价值计算器”）、“项目管理”“分类管理”切换入口、“API接口文档”入口（供技术人员查看）
2. **项目列表&计算结果区**（默认显示）：
   - 左侧：项目列表（表格/卡片形式，显示“项目名称、所属分类、总金额、剩余价值、消耗进度、状态”）
   - 右侧：选中项目的“详细计算结果”（大字体显示已消耗成本、剩余价值，小字体补充单位时间成本、有效时长、已用时长）
3. **操作区**：
   - 项目管理页：“添加项目”按钮、“筛选分类”下拉框、“批量删除”按钮
   - 分类管理页：“添加分类”按钮、分类列表（显示分类名称、关联项目数、编辑/删除按钮）


## 五、技术与部署要求
### 1. 部署要求（核心：Docker容器化）
- 提供完整的**Dockerfile**和**部署文档**，包含：
  - 基础镜像选择（如Alpine Linux+轻量Web服务，如Nginx+Node.js/Python Flask）
  - 容器内端口暴露（需指定端口号，如8080）
  - 数据持久化方案：通过Docker数据卷（Volume）挂载项目数据文件（如SQLite数据库文件），避免容器删除后数据丢失
  - 启动命令：明确“构建镜像→运行容器→访问地址”的完整步骤，确保可在服务器上一键部署

### 2. API接口预留（供外部数据交互）
需设计并预留**RESTful API接口**，支持外部系统（如用户自有工具）调用数据，接口需包含以下核心功能，且返回格式统一为JSON：

| 接口端点                | 请求方法 | 功能描述                                   | 请求参数（示例）                                                                 | 返回示例（简化）                                                                 |
|-------------------------|----------|--------------------------------------------|----------------------------------------------------------------------------------|----------------------------------------------------------------------------------|
| /api/categories         | GET      | 获取所有分类列表                           | 无                                                                                | {"code":200,"data":[{"categoryId":"category_001","name":"运动类","projectCount":2}]} |
| /api/categories         | POST     | 添加新分类                                 | {"name":"技术工具类"}                                                            | {"code":200,"message":"分类添加成功","data":{"categoryId":"category_002","name":"技术工具类"}} |
| /api/projects           | GET      | 获取所有项目列表（支持按分类筛选）         | ?categoryId=category_001（可选参数，不填则返回全部）                              | {"code":200,"data":[{"projectId":"proj_001","name":"健身房年卡","categoryId":"category_001","totalAmount":1980,"remainingValue":1200,...}]} |
| /api/projects           | POST     | 添加新项目                                 | {"name":"飞书会员","categoryId":"category_002","totalAmount":2400,"startTime":"2024-01-01 00:00","endTime":"2025-01-01 00:00"} | {"code":200,"message":"项目添加成功","data":{"projectId":"proj_002",...}}         |
| /api/projects/{projectId} | PUT    | 编辑指定项目                               | {"totalAmount":2500,"endTime":"2025-02-01 00:00"}（仅传需修改的字段）             | {"code":200,"message":"项目更新成功","data":{"projectId":"proj_002",...}}         |
| /api/projects/{projectId} | DELETE | 删除指定项目                               | 无（通过URL路径传projectId）                                                     | {"code":200,"message":"项目删除成功"}                                             |
| /api/projects/{projectId}/calculate | GET | 获取指定项目的实时计算结果                 | 无（通过URL路径传projectId）                                                     | {"code":200,"data":{"unitCost":6.85,"usedCost":780.25,"remainingValue":1619.75,"progress":32.5%}} |

- 接口需支持基础的错误处理（如参数缺失返回400、项目不存在返回404），错误信息格式统一：`{"code":400,"message":"缺少必填字段：总支付金额"}`
- 暂不要求身份认证（如Token），但需在接口文档中注明“若需生产环境使用，建议补充认证逻辑”


### 3. 数据存储要求
- 采用轻量级数据库（如SQLite）存储项目和分类数据，避免依赖外部数据库（降低部署复杂度）
- 数据文件需独立存放（便于Docker数据卷挂载），且支持自动备份（可选：每日自动生成备份文件，保留最近7天）


## 六、额外优化建议（可选，非强制）
1. **数据导出**：支持将项目列表/计算结果导出为Excel/CVS文件（满足用户统计需求）
2. **到期提醒**：对“消耗中”且剩余时长小于30天的项目，在列表中用橙色标注；已过期项目用红色标注
3. **时间粒度切换**：支持用户选择计算的时间粒度（默认“天”，可选“小时”，如小时付费的短期会员）
4. **离线使用**：支持浏览器本地缓存数据（辅助Docker数据持久化，避免临时断连导致数据丢失）


## 开发交付物清单
1. 完整源代码（含前端页面、后端接口、数据库脚本）
2. Dockerfile及部署文档（含环境依赖、启动步骤、数据卷配置）
3. API接口文档（含接口地址、参数说明、返回示例、错误码）
4. 简单的用户使用说明（如“如何添加项目”“如何查看计算结果”）