# 如何使用新的层级分类系统

## 对于普通用户（已有旧分类）

您在前端"分类管理"页面会看到一个**"初始化默认分类"**按钮。

### 使用步骤

1. **打开分类管理页面**
   - 访问 http://localhost:3000（前端地址）
   - 登录您的普通用户账号
   - 点击左侧菜单的"分类管理"

2. **初始化默认分类**
   - 点击右上角的"初始化默认分类"按钮
   - 系统会弹出确认对话框，说明将添加：
     - 8个一级分类
     - 38个二级分类
   
3. **重要说明**
   - ✅ **不会删除您现有的分类**
   - ✅ 新的默认分类将与您现有的分类并存
   - ✅ 如果已存在同名分类，将自动跳过
   - ✅ 您可以继续使用旧分类，也可以使用新的层级分类

4. **初始化后**
   - 刷新页面后将看到新的层级分类
   - 表格会自动显示树形结构
   - 可以展开/折叠一级分类查看二级分类

## 新的默认分类体系

### 一级分类（8个）

1. **固定资产** - 房产、车辆等长期持有的实物资产
   - 房产、车辆、设备、家具家电

2. **金融资产** - 现金、存款、理财等流动金融资产
   - 银行存款、理财产品、股票、债券、基金、保险

3. **投资资产** - 股权、债权等投资性资产
   - 股权投资、债权投资、信托、私募股权

4. **无形资产** - 知识产权、品牌等无形资产
   - 知识产权、域名、软件著作权、品牌价值

5. **教育投资** - 教育培训、技能提升等人力资本投资
   - 学历教育、职业培训、兴趣爱好、子女教育

6. **收藏品** - 艺术品、古董等收藏投资
   - 艺术品、古董、珠宝、贵金属、其他收藏

7. **数字资产** - 加密货币、NFT等数字资产
   - 加密货币、NFT、游戏资产

8. **其他资产** - 其他类型的资产
   - 会员权益、预付款、其他

## 如何管理分类

### 添加子分类
1. 在分类列表中找到要添加子分类的分类
2. 点击该分类行的"子级"按钮
3. 填写子分类信息并保存

### 编辑分类
1. 点击分类行的"编辑"按钮
2. 修改分类信息
3. 可以修改颜色、图标、描述等
4. 也可以修改父分类（移动到其他分类下）

### 删除分类
- ⚠️ 只有没有子分类且没有关联项目的分类才能删除
- 需要先删除或转移子分类
- 需要先删除或转移关联的项目

## 常见问题

### Q: 初始化后会删除我的旧分类吗？
A: **不会**。新的默认分类会与您现有的分类并存。

### Q: 如果我已有同名的分类怎么办？
A: 系统会自动跳过已存在的同名分类，不会重复创建。

### Q: 可以自定义分类吗？
A: 可以。您可以：
- 修改默认分类的名称、颜色、图标
- 添加自己的一级和二级分类
- 删除不需要的分类（需先转移项目）

### Q: 最多支持几级分类？
A: 最多支持2级（一级+二级）。

### Q: 能否把项目移动到不同的分类？
A: 可以。在项目编辑页面修改分类即可。

## 技术细节

### 后端修改
- `/api/categories/initialize` 接口支持 `force` 参数
- `force=true` 时会添加默认分类，即使用户已有分类
- 智能跳过已存在的同名分类

### 前端修改
- 分类管理页面增加"初始化默认分类"按钮
- 支持树形展示和操作
- 自动展开/折叠层级结构

### 数据库
- 使用 `parent_id` 字段实现层级关系
- `user_id` 字段确保数据隔离
- 唯一约束防止同层级重复命名

## 开始使用

现在就去点击"初始化默认分类"按钮，体验新的层级分类系统吧！
