# é˜¿é‡Œäº‘æœåŠ¡å™¨éƒ¨ç½²ä¿®å¤æ­¥éª¤

## ğŸ”§ é—®é¢˜å·²ä¿®å¤

ä¾èµ–å†²çªé—®é¢˜å·²åœ¨ä»£ç ä¸­ä¿®å¤ï¼Œç°åœ¨å¯ä»¥æ­£å¸¸éƒ¨ç½²äº†ï¼

---

## ğŸš€ åœ¨é˜¿é‡Œäº‘æœåŠ¡å™¨ä¸Šæ‰§è¡Œä»¥ä¸‹æ­¥éª¤

### æ­¥éª¤1ï¼šè¿æ¥åˆ°æœåŠ¡å™¨

```bash
ssh root@ä½ çš„æœåŠ¡å™¨IP
```

### æ­¥éª¤2ï¼šè¿›å…¥é¡¹ç›®ç›®å½•

```bash
cd /root/timevalue  # æˆ–ä½ çš„é¡¹ç›®è·¯å¾„
```

### æ­¥éª¤3ï¼šæ‹‰å–æœ€æ–°ä»£ç 

```bash
git pull origin main
```

ä½ ä¼šçœ‹åˆ°ç±»ä¼¼è¾“å‡ºï¼š
```
remote: Enumerating objects: 8, done.
remote: Counting objects: 100% (8/8), done.
...
Updating fe60322..6e6dfd3
Fast-forward
 DEPENDENCY_FIX.md          | 139 +++++++++++++++++++++++++++++++
 backend/requirements.txt   |   2 +-
 2 files changed, 140 insertions(+), 1 deletion(-)
```

### æ­¥éª¤4ï¼šé‡æ–°å®‰è£…åç«¯ä¾èµ–

```bash
cd backend

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼ˆå¦‚æœä½¿ç”¨ï¼‰
source venv/bin/activate

# å‡çº§pip
pip install --upgrade pip

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

### æ­¥éª¤5ï¼šéªŒè¯å®‰è£…

```bash
# æ£€æŸ¥å…³é”®åŒ…ç‰ˆæœ¬
pip list | grep lang
```

åº”è¯¥çœ‹åˆ°ï¼š
```
langchain-core    0.2.38      # ç‰ˆæœ¬åº”åœ¨ 0.2.27 åˆ° 0.3.0 ä¹‹é—´
langgraph         0.2.0
```

### æ­¥éª¤6ï¼šå¯åŠ¨æœåŠ¡

```bash
cd ..  # å›åˆ°é¡¹ç›®æ ¹ç›®å½•
./start_production.sh
```

---

## âœ… å®Œæ•´éƒ¨ç½²æµç¨‹ï¼ˆå¦‚æœæ˜¯é¦–æ¬¡éƒ¨ç½²ï¼‰

### æ–¹å¼ä¸€ï¼šä¸€é”®éƒ¨ç½²ï¼ˆæ¨èï¼‰

```bash
# 1. å…‹éš†ä»£ç 
git clone https://codeup.aliyun.com/670f88349d3c82efe37b1105/timevalue.git
cd timevalue

# 2. è®¾ç½®æƒé™
chmod +x *.sh

# 3. ä¸€é”®éƒ¨ç½²
./deploy.sh

# 4. å¯åŠ¨æœåŠ¡
./start_production.sh
```

### æ–¹å¼äºŒï¼šæ‰‹åŠ¨éƒ¨ç½²

```bash
# 1. å…‹éš†ä»£ç 
git clone https://codeup.aliyun.com/670f88349d3c82efe37b1105/timevalue.git
cd timevalue

# 2. å®‰è£…Pythonä¾èµ–
cd backend
python3 -m venv venv
source venv/bin/activate
pip install --upgrade pip
pip install -r requirements.txt

# 3. ç”Ÿæˆå¯†é’¥
python3 generate_keys.py

# 4. å®‰è£…å‰ç«¯ä¾èµ–
cd ../frontend
npm install

# 5. å¯åŠ¨æœåŠ¡
cd ..
chmod +x *.sh
./start_production.sh
```

---

## ğŸ” æ•…éšœæ’æŸ¥

### é—®é¢˜1: ä¾èµ–å®‰è£…å¤±è´¥

```bash
# æ¸…ç†ç¼“å­˜é‡è¯•
pip cache purge
pip install -r requirements.txt --no-cache-dir
```

### é—®é¢˜2: è™šæ‹Ÿç¯å¢ƒé—®é¢˜

```bash
# é‡æ–°åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
cd backend
rm -rf venv
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

### é—®é¢˜3: æƒé™é—®é¢˜

```bash
# ç¡®ä¿è„šæœ¬æœ‰æ‰§è¡Œæƒé™
chmod +x *.sh

# ç¡®ä¿æ•°æ®ç›®å½•å¯å†™
chmod 755 data/
chmod 755 logs/
```

### é—®é¢˜4: ç«¯å£è¢«å ç”¨

```bash
# åœæ­¢å·²è¿è¡Œçš„æœåŠ¡
./stop_production.sh

# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tlnp | grep :5000
netstat -tlnp | grep :3000

# å¦‚æœæœ‰æ®‹ç•™è¿›ç¨‹ï¼Œæ‰‹åŠ¨ç»ˆæ­¢
kill -9 <PID>
```

---

## ğŸ“‹ æœåŠ¡ç®¡ç†å‘½ä»¤

```bash
# å¯åŠ¨æœåŠ¡
./start_production.sh

# åœæ­¢æœåŠ¡
./stop_production.sh

# æŸ¥çœ‹çŠ¶æ€
./check_status.sh

# æŸ¥çœ‹æ—¥å¿—
tail -f logs/backend.log
tail -f logs/frontend.log

# é‡å¯æœåŠ¡
./stop_production.sh && ./start_production.sh
```

---

## ğŸŒ è®¿é—®åº”ç”¨

å¯åŠ¨æˆåŠŸåï¼Œè®¿é—®ï¼š

- **æœ¬åœ°**: http://localhost:3000
- **å…¬ç½‘**: http://ä½ çš„æœåŠ¡å™¨å…¬ç½‘IP:3000

**é»˜è®¤ç®¡ç†å‘˜è´¦å·**:
- ç”¨æˆ·å: `admin`
- å¯†ç : `admin123`

---

## âš ï¸ é‡è¦æé†’

1. **å®‰å…¨ç»„é…ç½®**
   - ç¡®ä¿é˜¿é‡Œäº‘å®‰å…¨ç»„å·²å¼€æ”¾ **3000** å’Œ **5000** ç«¯å£

2. **é˜²ç«å¢™é…ç½®**
   ```bash
   # Ubuntu/Debian
   sudo ufw allow 3000
   sudo ufw allow 5000
   
   # CentOS/RHEL
   sudo firewall-cmd --permanent --add-port=3000/tcp
   sudo firewall-cmd --permanent --add-port=5000/tcp
   sudo firewall-cmd --reload
   ```

3. **é¦–æ¬¡ç™»å½•åä¿®æ”¹å¯†ç **
   - ç™»å½•ç³»ç»Ÿåç«‹å³ä¿®æ”¹ admin å¯†ç 

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

æŸ¥çœ‹è¯¦ç»†æ–‡æ¡£ï¼š
- [å®Œæ•´éƒ¨ç½²æŒ‡å—](DEPLOY_GUIDE.md)
- [ä¾èµ–ä¿®å¤è¯´æ˜](DEPENDENCY_FIX.md)
- [å¿«é€Ÿå‚è€ƒ](QUICK_REFERENCE.md)

---

**ä¿®å¤å®Œæˆæ—¶é—´**: 2025-11-29  
**Powered by å­šæ™®ç§‘æŠ€ï¼ˆåŒ—äº¬ï¼‰æœ‰é™å…¬å¸**
