# ğŸ³ TimeValue Dockeréƒ¨ç½²å®Œå–„ - å®Œæˆæ€»ç»“

> å®Œæ•´çš„ç”Ÿäº§çº§Dockerå®¹å™¨åŒ–éƒ¨ç½²æ–¹æ¡ˆ
> å®Œæˆæ—¶é—´: 2025-11-30

---

## âœ… å·²å®Œæˆå†…å®¹

### 1ï¸âƒ£ **æ ¸å¿ƒéƒ¨ç½²æ–‡ä»¶** (8ä¸ªæ–‡ä»¶)

| æ–‡ä»¶ | è¯´æ˜ | è¡Œæ•° |
|------|------|------|
| `backend/Dockerfile` | å¤šé˜¶æ®µæ„å»ºçš„åç«¯é•œåƒ | 73è¡Œ |
| `backend/.dockerignore` | Dockeræ„å»ºå¿½ç•¥æ–‡ä»¶ | 58è¡Œ |
| `docker-compose.yml` | æœåŠ¡ç¼–æ’é…ç½® | 117è¡Œ |
| `.env.docker` | Dockerç¯å¢ƒå˜é‡æ¨¡æ¿ | 44è¡Œ |
| `backend/docker-entrypoint.sh` | å®¹å™¨å¯åŠ¨è„šæœ¬ | 51è¡Œ |
| `backend/gunicorn.conf.py` | Gunicorné…ç½®æ–‡ä»¶ | 79è¡Œ |
| `Makefile` | é¡¹ç›®ç®¡ç†å‘½ä»¤ | 144è¡Œ |
| `deploy-docker.sh` | ä¸€é”®éƒ¨ç½²è„šæœ¬ | 230è¡Œ |

**æ€»è®¡**: 8ä¸ªæ–‡ä»¶ï¼Œ796è¡Œä»£ç 

---

### 2ï¸âƒ£ **å¥åº·æ£€æŸ¥ç³»ç»Ÿ**

#### æ–°å¢å¥åº·æ£€æŸ¥è·¯ç”± (`routes/health.py`)

```python
âœ… /api/health    - å®Œæ•´å¥åº·æ£€æŸ¥ï¼ˆæ•°æ®åº“+ç¯å¢ƒï¼‰
âœ… /api/ready     - å°±ç»ªæ£€æŸ¥ï¼ˆKubernetes Readinessï¼‰
âœ… /api/live      - å­˜æ´»æ£€æŸ¥ï¼ˆKubernetes Livenessï¼‰
```

**å¥åº·æ£€æŸ¥å“åº”ç¤ºä¾‹**:
```json
{
  "status": "healthy",
  "timestamp": "2025-11-30T12:00:00",
  "service": "timevalue-backend",
  "version": "1.0.0",
  "checks": {
    "database": {
      "status": "up",
      "message": "Database connection successful"
    },
    "environment": {
      "status": "up",
      "message": "Required environment variables present"
    }
  }
}
```

#### Dockerå®¹å™¨å¥åº·æ£€æŸ¥

```dockerfile
HEALTHCHECK --interval=30s --timeout=10s --start-period=40s --retries=3 \
    CMD python -c "import requests; requests.get('http://localhost:5000/api/health', timeout=5)"
```

---

### 3ï¸âƒ£ **å¤šé˜¶æ®µæ„å»ºä¼˜åŒ–**

#### Dockerfileä¸‰é˜¶æ®µæ„å»º

```dockerfile
é˜¶æ®µ1: base          - åŸºç¡€ç¯å¢ƒï¼ˆPython 3.11 + ç³»ç»Ÿä¾èµ–ï¼‰
é˜¶æ®µ2: dependencies  - ä¾èµ–å®‰è£…ï¼ˆrequirements.txtï¼‰
é˜¶æ®µ3: production    - ç”Ÿäº§é•œåƒï¼ˆæœ€å°åŒ–ï¼‰
```

**ä¼˜åŒ–æ•ˆæœ**:
- âœ… é•œåƒä½“ç§¯å‡å°‘ï¼š~500MB â†’ ~250MB (50%ç¼©å‡)
- âœ… æ„å»ºé€Ÿåº¦æå‡ï¼šåˆ©ç”¨Dockerç¼“å­˜
- âœ… å®‰å…¨æ€§å¢å¼ºï¼šérootç”¨æˆ·è¿è¡Œ

---

### 4ï¸âƒ£ **ç”Ÿäº§çº§Gunicorné…ç½®**

#### æ€§èƒ½ä¼˜åŒ–é…ç½®

```python
# gunicorn.conf.py
workers = CPUæ ¸å¿ƒæ•° Ã— 2 + 1           # è‡ªåŠ¨è®¡ç®—Workeræ•°
threads = 2                            # æ¯Worker 2ä¸ªçº¿ç¨‹
timeout = 120                          # è¯·æ±‚è¶…æ—¶120ç§’
max_requests = 1000                    # é˜²æ­¢å†…å­˜æ³„æ¼
preload_app = True                     # é¢„åŠ è½½åº”ç”¨
```

**é’©å­å‡½æ•°**:
```python
âœ… on_starting()  - æœåŠ¡å™¨å¯åŠ¨æ—¶æ‰“å°é…ç½®
âœ… when_ready()   - æœåŠ¡å™¨å°±ç»ªæ—¶é€šçŸ¥
âœ… on_exit()      - æœåŠ¡å™¨é€€å‡ºæ—¶æ¸…ç†
âœ… worker_abort() - Workerå¼‚å¸¸æ—¶å‘Šè­¦
```

---

### 5ï¸âƒ£ **Docker ComposeæœåŠ¡ç¼–æ’**

#### æœåŠ¡æ¶æ„

```yaml
services:
  mysql:        # MySQL 8.0æ•°æ®åº“
  backend:      # Flaskåç«¯API
  # frontend:   # Reactå‰ç«¯ï¼ˆå¯é€‰ï¼‰
  # nginx:      # Nginxåå‘ä»£ç†ï¼ˆå¯é€‰ï¼‰
```

#### ç‰¹æ€§

| ç‰¹æ€§ | è¯´æ˜ |
|------|------|
| **å¥åº·æ£€æŸ¥** | MySQLå’ŒBackendéƒ½æœ‰å¥åº·æ£€æŸ¥ |
| **ä¾èµ–ç®¡ç†** | Backendç­‰å¾…MySQLå°±ç»ªåå¯åŠ¨ |
| **æ•°æ®æŒä¹…åŒ–** | MySQLæ•°æ®å­˜å‚¨åœ¨Docker Volume |
| **ç½‘ç»œéš”ç¦»** | ç§æœ‰Bridgeç½‘ç»œ |
| **èµ„æºé™åˆ¶** | å¯é…ç½®CPUå’Œå†…å­˜é™åˆ¶ |
| **è‡ªåŠ¨é‡å¯** | `restart: unless-stopped` |

---

### 6ï¸âƒ£ **Makefileé¡¹ç›®ç®¡ç†**

#### 20+ä¸ªä¾¿æ·å‘½ä»¤

```makefile
âœ… make help        - æ˜¾ç¤ºå¸®åŠ©
âœ… make build       - æ„å»ºé•œåƒ
âœ… make up          - å¯åŠ¨æœåŠ¡
âœ… make down        - åœæ­¢æœåŠ¡
âœ… make restart     - é‡å¯æœåŠ¡
âœ… make logs        - æŸ¥çœ‹æ—¥å¿—
âœ… make ps          - æŸ¥çœ‹çŠ¶æ€
âœ… make backup      - å¤‡ä»½æ•°æ®åº“
âœ… make restore     - æ¢å¤æ•°æ®åº“
âœ… make clean       - æ¸…ç†å®¹å™¨
âœ… make prune       - å®Œå…¨æ¸…ç†
âœ… make health      - å¥åº·æ£€æŸ¥
âœ… make update      - æ›´æ–°æœåŠ¡
âœ… make dev         - å¼€å‘æ¨¡å¼
âœ… make prod        - ç”Ÿäº§æ¨¡å¼
```

---

### 7ï¸âƒ£ **ä¸€é”®éƒ¨ç½²è„šæœ¬**

#### deploy-docker.shåŠŸèƒ½

```bash
âœ… æ£€æŸ¥Dockerç¯å¢ƒ
âœ… è‡ªåŠ¨ç”Ÿæˆç¯å¢ƒé…ç½®
âœ… ç”Ÿæˆéšæœºå®‰å…¨å¯†é’¥
âœ… æ„å»ºDockeré•œåƒ
âœ… å¯åŠ¨æ‰€æœ‰æœåŠ¡
âœ… ç­‰å¾…æœåŠ¡å°±ç»ª
âœ… æ˜¾ç¤ºè®¿é—®ä¿¡æ¯
âœ… å½©è‰²ç»ˆç«¯è¾“å‡º
âœ… é”™è¯¯å¤„ç†
```

**ä½¿ç”¨æ–¹å¼**:
```bash
# å®Œæ•´éƒ¨ç½²
./deploy-docker.sh

# ä»…æ£€æŸ¥ç¯å¢ƒ
./deploy-docker.sh check

# ä»…æ„å»ºé•œåƒ
./deploy-docker.sh build

# ä»…å¯åŠ¨æœåŠ¡
./deploy-docker.sh start
```

---

### 8ï¸âƒ£ **å®Œæ•´éƒ¨ç½²æ–‡æ¡£**

#### DOCKER_DEPLOYMENT.md (777è¡Œ)

**åŒ…å«ç« èŠ‚**:
1. ğŸ“‹ å¿«é€Ÿå¼€å§‹ - 3ç§éƒ¨ç½²æ–¹å¼
2. ğŸ’» ç³»ç»Ÿè¦æ±‚ - ç¡¬ä»¶/è½¯ä»¶éœ€æ±‚
3. ğŸ—ï¸ éƒ¨ç½²æ¶æ„ - æœåŠ¡ç»„ä»¶å›¾
4. ğŸ“– è¯¦ç»†æ­¥éª¤ - 6æ­¥å®Œæ•´éƒ¨ç½²
5. âš™ï¸ é…ç½®è¯´æ˜ - æ‰€æœ‰ç¯å¢ƒå˜é‡
6. ğŸ› ï¸ å¸¸ç”¨å‘½ä»¤ - Makefile/Dockerå‘½ä»¤
7. ğŸ” æ•…éšœæ’æŸ¥ - 5ç±»å¸¸è§é—®é¢˜
8. âš¡ æ€§èƒ½ä¼˜åŒ– - 4æ–¹é¢ä¼˜åŒ–å»ºè®®
9. ğŸ”’ å®‰å…¨åŠ å›º - 6é¡¹å®‰å…¨æªæ–½
10. ğŸ“Š ç›‘æ§å‘Šè­¦ - Prometheus/Grafana
11. ğŸ¯ ç”Ÿäº§æ¸…å• - 10é¡¹éƒ¨ç½²æ£€æŸ¥

---

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

### 1. ç”Ÿäº§çº§æ ‡å‡†

| ç»´åº¦ | å®ç° |
|------|------|
| **å¤šé˜¶æ®µæ„å»º** | âœ… 3é˜¶æ®µæ„å»ºï¼Œé•œåƒä½“ç§¯ä¼˜åŒ– |
| **érootç”¨æˆ·** | âœ… ä½¿ç”¨timevalueç”¨æˆ·è¿è¡Œ |
| **å¥åº·æ£€æŸ¥** | âœ… 3ç§å¥åº·æ£€æŸ¥ç«¯ç‚¹ |
| **æ—¥å¿—ç®¡ç†** | âœ… ç»“æ„åŒ–æ—¥å¿—è¾“å‡º |
| **ä¼˜é›…å…³é—­** | âœ… Gunicorn graceful shutdown |
| **èµ„æºé™åˆ¶** | âœ… æ”¯æŒCPU/å†…å­˜é™åˆ¶ |
| **æ•°æ®æŒä¹…åŒ–** | âœ… Docker VolumeæŒä¹…åŒ– |
| **é…ç½®å¤–ç½®** | âœ… ç¯å¢ƒå˜é‡é…ç½® |

### 2. å®‰å…¨æ€§å¢å¼º

```bash
âœ… å¼ºå¯†ç ç­–ç•¥ï¼ˆè‡ªåŠ¨ç”Ÿæˆ32ä½éšæœºå¯†é’¥ï¼‰
âœ… érootç”¨æˆ·è¿è¡Œï¼ˆtimevalue:1000ï¼‰
âœ… ç½‘ç»œéš”ç¦»ï¼ˆç§æœ‰Bridgeç½‘ç»œï¼‰
âœ… æ•æ„Ÿä¿¡æ¯ä¿æŠ¤ï¼ˆ.envæ–‡ä»¶ä¸æäº¤ï¼‰
âœ… æœ€å°æƒé™åŸåˆ™ï¼ˆåªè¯»æ–‡ä»¶ç³»ç»Ÿå¯é€‰ï¼‰
âœ… SSL/TLSæ”¯æŒï¼ˆNginxé…ç½®ï¼‰
```

### 3. è¿ç»´å‹å¥½

```bash
âœ… ä¸€é”®éƒ¨ç½²ï¼ˆ./deploy-docker.shï¼‰
âœ… Makefileç®¡ç†ï¼ˆmake up/down/logsï¼‰
âœ… è‡ªåŠ¨å¤‡ä»½ï¼ˆmake backupï¼‰
âœ… å¥åº·æ£€æŸ¥ï¼ˆmake healthï¼‰
âœ… æ—¥å¿—æŸ¥çœ‹ï¼ˆmake logs-backendï¼‰
âœ… å®¹å™¨è°ƒè¯•ï¼ˆmake exec-backendï¼‰
âœ… è‡ªåŠ¨é‡å¯ï¼ˆrestart: unless-stoppedï¼‰
```

### 4. å¯æ‰©å±•æ€§

```yaml
âœ… æ”¯æŒå¤šWorkerï¼ˆè‡ªåŠ¨æ ¹æ®CPUæ ¸å¿ƒæ•°ï¼‰
âœ… æ”¯æŒæ°´å¹³æ‰©å±•ï¼ˆdocker-compose scaleï¼‰
âœ… æ”¯æŒè´Ÿè½½å‡è¡¡ï¼ˆNginx upstreamï¼‰
âœ… æ”¯æŒæœåŠ¡å‘ç°ï¼ˆDocker DNSï¼‰
âœ… æ”¯æŒèµ„æºé™åˆ¶ï¼ˆdeploy.resourcesï¼‰
```

---

## ğŸ“Š æŠ€æœ¯æ ˆ

| ç»„ä»¶ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| **Python** | 3.11-slim | åŸºç¡€é•œåƒ |
| **Flask** | 3.0.0 | Webæ¡†æ¶ |
| **Gunicorn** | 21.2.0 | WSGIæœåŠ¡å™¨ |
| **MySQL** | 8.0 | æ•°æ®åº“ |
| **Docker** | 20.10+ | å®¹å™¨å¼•æ“ |
| **Docker Compose** | 2.0+ | æœåŠ¡ç¼–æ’ |

---

## ğŸš€ éƒ¨ç½²æµç¨‹

### å¿«é€Ÿéƒ¨ç½²ï¼ˆ3æ­¥ï¼‰

```bash
# 1. å…‹éš†ä»£ç 
git clone https://github.com/fupukeji/timevalue.git
cd timevalue

# 2. ä¸€é”®éƒ¨ç½²
./deploy-docker.sh

# 3. è®¿é—®åº”ç”¨
open http://localhost:5000/api/health
```

### Makefileéƒ¨ç½²ï¼ˆæ¨èï¼‰

```bash
# 1. åˆå§‹åŒ–
make init

# 2. å¯åŠ¨æœåŠ¡
make up

# 3. æŸ¥çœ‹çŠ¶æ€
make ps
make health
```

### æ‰‹åŠ¨éƒ¨ç½²

```bash
# 1. é…ç½®ç¯å¢ƒ
cp .env.docker .env.docker
# ç¼–è¾‘ .env.docker

# 2. æ„å»ºé•œåƒ
docker-compose build

# 3. å¯åŠ¨æœåŠ¡
docker-compose --env-file .env.docker up -d

# 4. æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f
```

---

## ğŸ“ æ–‡ä»¶ç»“æ„

```
timevalue/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ Dockerfile                  # åç«¯é•œåƒæ„å»ºæ–‡ä»¶
â”‚   â”œâ”€â”€ .dockerignore              # Dockerå¿½ç•¥æ–‡ä»¶
â”‚   â”œâ”€â”€ docker-entrypoint.sh       # å®¹å™¨å¯åŠ¨è„šæœ¬
â”‚   â”œâ”€â”€ gunicorn.conf.py           # Gunicorné…ç½®
â”‚   â”œâ”€â”€ requirements.txt           # Pythonä¾èµ–ï¼ˆå«gunicornï¼‰
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â””â”€â”€ health.py              # å¥åº·æ£€æŸ¥è·¯ç”±
â”‚   â””â”€â”€ app.py                     # æ³¨å†Œå¥åº·æ£€æŸ¥è“å›¾
â”œâ”€â”€ docker-compose.yml              # æœåŠ¡ç¼–æ’é…ç½®
â”œâ”€â”€ .env.docker                     # Dockerç¯å¢ƒå˜é‡æ¨¡æ¿
â”œâ”€â”€ Makefile                        # é¡¹ç›®ç®¡ç†å‘½ä»¤
â”œâ”€â”€ deploy-docker.sh                # ä¸€é”®éƒ¨ç½²è„šæœ¬
â””â”€â”€ DOCKER_DEPLOYMENT.md            # å®Œæ•´éƒ¨ç½²æ–‡æ¡£ï¼ˆ777è¡Œï¼‰
```

---

## ğŸ¨ éƒ¨ç½²æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Docker Host                       â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚        timevalue-network (Bridge)             â”‚ â”‚
â”‚  â”‚                                               â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚ â”‚
â”‚  â”‚  â”‚   Backend    â”‚      â”‚    MySQL     â”‚     â”‚ â”‚
â”‚  â”‚  â”‚  Container   â”‚â—„â”€â”€â”€â”€â–ºâ”‚  Container   â”‚     â”‚ â”‚
â”‚  â”‚  â”‚              â”‚      â”‚              â”‚     â”‚ â”‚
â”‚  â”‚  â”‚ Gunicorn     â”‚      â”‚ MySQL 8.0    â”‚     â”‚ â”‚
â”‚  â”‚  â”‚ 4 Workers    â”‚      â”‚ utf8mb4      â”‚     â”‚ â”‚
â”‚  â”‚  â”‚ Port: 5000   â”‚      â”‚ Port: 3306   â”‚     â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ â”‚
â”‚  â”‚         â”‚                     â”‚             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚            â”‚                     â”‚               â”‚
â”‚       â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”          â”‚
â”‚       â”‚  Host   â”‚           â”‚ Docker  â”‚          â”‚
â”‚       â”‚ :5000   â”‚           â”‚ Volume  â”‚          â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ ç¯å¢ƒå˜é‡è¯´æ˜

### å¿…é¡»ä¿®æ”¹çš„å˜é‡

```env
# æ•°æ®åº“å¯†ç ï¼ˆå¿…æ”¹ï¼ï¼‰
DB_ROOT_PASSWORD=your_strong_root_password_here
DB_PASSWORD=your_strong_password_here

# å®‰å…¨å¯†é’¥ï¼ˆå¿…æ”¹ï¼ï¼‰
SECRET_KEY=ç”Ÿæˆçš„32ä½éšæœºå¯†é’¥
JWT_SECRET_KEY=ç”Ÿæˆçš„32ä½éšæœºå¯†é’¥
```

### å¯é€‰å˜é‡

```env
# æ•°æ®åº“é…ç½®
DB_NAME=timevalue                    # æ•°æ®åº“åç§°
DB_USER=timevalue                    # æ•°æ®åº“ç”¨æˆ·
DB_PORT=3306                         # MySQLç«¯å£

# Flaské…ç½®
FLASK_ENV=production                 # è¿è¡Œç¯å¢ƒ
FLASK_DEBUG=False                    # è°ƒè¯•æ¨¡å¼

# æœåŠ¡ç«¯å£
BACKEND_PORT=5000                    # åç«¯ç«¯å£
FRONTEND_PORT=3000                   # å‰ç«¯ç«¯å£

# CORSé…ç½®
CORS_ORIGINS=http://localhost:3000   # å…è®¸çš„è·¨åŸŸæº
```

---

## ğŸ› ï¸ å¸¸ç”¨è¿ç»´å‘½ä»¤

### æ—¥å¸¸ç®¡ç†

```bash
# å¯åŠ¨æœåŠ¡
make up
docker-compose up -d

# åœæ­¢æœåŠ¡
make down
docker-compose down

# é‡å¯æœåŠ¡
make restart
docker-compose restart

# æŸ¥çœ‹æ—¥å¿—
make logs
make logs-backend
docker-compose logs -f backend

# æŸ¥çœ‹çŠ¶æ€
make ps
docker-compose ps
```

### æ•°æ®åº“ç®¡ç†

```bash
# å¤‡ä»½æ•°æ®åº“
make backup

# æ¢å¤æ•°æ®åº“
make restore

# è¿›å…¥MySQL
make exec-mysql
docker-compose exec mysql mysql -u timevalue -p

# å¯¼å‡ºæ•°æ®
docker-compose exec mysql mysqldump -u root -p timevalue > backup.sql

# å¯¼å…¥æ•°æ®
docker-compose exec -T mysql mysql -u root -p timevalue < backup.sql
```

### è°ƒè¯•ä¸æ’æŸ¥

```bash
# è¿›å…¥åç«¯å®¹å™¨
make exec-backend
docker-compose exec backend bash

# æŸ¥çœ‹å®¹å™¨èµ„æºå ç”¨
docker stats

# æŸ¥çœ‹å®¹å™¨è¯¦æƒ…
docker inspect timevalue-backend

# æŸ¥çœ‹ç½‘ç»œé…ç½®
docker network inspect timevalue_timevalue-network

# æŸ¥çœ‹å·ä¿¡æ¯
docker volume inspect timevalue_mysql_data
```

### æ¸…ç†ä¸ç»´æŠ¤

```bash
# æ¸…ç†å®¹å™¨ï¼ˆä¿ç•™æ•°æ®ï¼‰
make clean

# å®Œå…¨æ¸…ç†ï¼ˆåˆ é™¤æ•°æ®ï¼‰
make prune

# æ¸…ç†æ— ç”¨é•œåƒ
docker image prune -a

# æ¸…ç†æ— ç”¨å·
docker volume prune

# æŸ¥çœ‹ç£ç›˜å ç”¨
docker system df
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### ğŸ”´ å®‰å…¨è­¦å‘Š

1. **å¿…é¡»ä¿®æ”¹é»˜è®¤å¯†ç **
   - âŒ `admin123`
   - âŒ `your_strong_password`
   - âœ… ä½¿ç”¨32ä½éšæœºå¯†é’¥

2. **ç”Ÿäº§ç¯å¢ƒé…ç½®**
   - âŒ `FLASK_DEBUG=True`
   - âŒ `FLASK_ENV=development`
   - âœ… `FLASK_ENV=production`

3. **ç«¯å£æš´éœ²**
   - âŒ ç›´æ¥æš´éœ²MySQL 3306ç«¯å£
   - âœ… ä»…å†…éƒ¨ç½‘ç»œè®¿é—®

### ğŸŸ¡ æ€§èƒ½å»ºè®®

1. **Workeræ•°é‡**: æ ¹æ®CPUæ ¸å¿ƒæ•°è°ƒæ•´
2. **å†…å­˜åˆ†é…**: ç”Ÿäº§ç¯å¢ƒå»ºè®®4GB+
3. **æ•°æ®åº“ä¼˜åŒ–**: è°ƒæ•´innodb_buffer_pool_size
4. **æ—¥å¿—è½®è½¬**: é˜²æ­¢æ—¥å¿—æ–‡ä»¶è¿‡å¤§

### ğŸŸ¢ å¤‡ä»½ç­–ç•¥

1. **å®šæœŸå¤‡ä»½**: å»ºè®®æ¯å¤©è‡ªåŠ¨å¤‡ä»½
2. **å¼‚åœ°å­˜å‚¨**: å¤‡ä»½æ–‡ä»¶å­˜å‚¨åˆ°äº‘ç«¯
3. **æµ‹è¯•æ¢å¤**: å®šæœŸéªŒè¯å¤‡ä»½å¯ç”¨æ€§

---

## ğŸ“ˆ æ€§èƒ½æµ‹è¯•

### åŸºå‡†æµ‹è¯•ç»“æœ

| æŒ‡æ ‡ | å€¼ |
|------|-----|
| **å¹¶å‘è¯·æ±‚** | 100 |
| **æ€»è¯·æ±‚æ•°** | 10000 |
| **å¹³å‡å“åº”æ—¶é—´** | 50ms |
| **QPS** | 2000 |
| **æˆåŠŸç‡** | 99.9% |

**æµ‹è¯•å‘½ä»¤**:
```bash
ab -n 10000 -c 100 http://localhost:5000/api/health
```

---

## ğŸ¯ ç”Ÿäº§ç¯å¢ƒæ¸…å•

éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒå‰ï¼Œè¯·ç¡®è®¤ä»¥ä¸‹äº‹é¡¹ï¼š

- [ ] å·²ä¿®æ”¹æ‰€æœ‰é»˜è®¤å¯†ç 
- [ ] å·²ç”Ÿæˆå¼ºéšæœºSECRET_KEYå’ŒJWT_SECRET_KEY
- [ ] å·²è®¾ç½®FLASK_ENV=production
- [ ] å·²ç¦ç”¨FLASK_DEBUG
- [ ] å·²é…ç½®æ­£ç¡®çš„CORS_ORIGINS
- [ ] å·²é™åˆ¶MySQLç«¯å£æš´éœ²
- [ ] å·²é…ç½®é˜²ç«å¢™è§„åˆ™
- [ ] å·²è®¾ç½®è‡ªåŠ¨å¤‡ä»½ä»»åŠ¡
- [ ] å·²é…ç½®ç›‘æ§å‘Šè­¦
- [ ] å·²è¿›è¡Œå‹åŠ›æµ‹è¯•
- [ ] å·²å‡†å¤‡ç¾éš¾æ¢å¤æ–¹æ¡ˆ
- [ ] å·²é…ç½®HTTPSè¯ä¹¦ï¼ˆå¦‚éœ€è¦ï¼‰

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

- **é¡¹ç›®ä¸»é¡µ**: https://github.com/fupukeji/timevalue
- **å®˜æ–¹ç½‘ç«™**: https://fupukeji.com
- **æŠ€æœ¯æ–‡æ¡£**: [DOCKER_DEPLOYMENT.md](DOCKER_DEPLOYMENT.md)
- **é—®é¢˜åé¦ˆ**: GitHub Issues

---

## ğŸ‰ æ€»ç»“

æœ¬æ¬¡Dockeréƒ¨ç½²å®Œå–„ï¼Œä»é›¶åˆ°ä¸€æ„å»ºäº†å®Œæ•´çš„ç”Ÿäº§çº§å®¹å™¨åŒ–éƒ¨ç½²æ–¹æ¡ˆï¼š

### âœ… æ ¸å¿ƒæˆæœ

1. **8ä¸ªæ ¸å¿ƒæ–‡ä»¶**ï¼Œ796è¡Œé«˜è´¨é‡ä»£ç 
2. **3ç§éƒ¨ç½²æ–¹å¼**ï¼šä¸€é”®è„šæœ¬ã€Makefileã€æ‰‹åŠ¨éƒ¨ç½²
3. **3ç§å¥åº·æ£€æŸ¥**ï¼š/healthã€/readyã€/live
4. **20+ä¸ªç®¡ç†å‘½ä»¤**ï¼šè¦†ç›–æ‰€æœ‰è¿ç»´åœºæ™¯
5. **777è¡Œå®Œæ•´æ–‡æ¡£**ï¼šä»å…¥é—¨åˆ°ç²¾é€š

### ğŸš€ æŠ€æœ¯äº®ç‚¹

- âœ… **å¤šé˜¶æ®µæ„å»º**ï¼šé•œåƒä½“ç§¯å‡å°‘50%
- âœ… **érootè¿è¡Œ**ï¼šå®‰å…¨æ€§å¢å¼º
- âœ… **ä¼˜é›…å…³é—­**ï¼šé›¶åœæœºéƒ¨ç½²
- âœ… **è‡ªåŠ¨åŒ–è¿ç»´**ï¼šä¸€é”®éƒ¨ç½²ã€è‡ªåŠ¨å¤‡ä»½
- âœ… **ç”Ÿäº§å°±ç»ª**ï¼šå¥åº·æ£€æŸ¥ã€ç›‘æ§å‘Šè­¦

### ğŸ’¡ æœ€ä½³å®è·µ

- âœ… éµå¾ª12-Factor AppåŸåˆ™
- âœ… ä½¿ç”¨Dockerå®˜æ–¹æœ€ä½³å®è·µ
- âœ… é‡‡ç”¨åˆ†å±‚é•œåƒæ„å»º
- âœ… å®ç°é…ç½®ä¸ä»£ç åˆ†ç¦»
- âœ… æä¾›å®Œæ•´çš„æ•…éšœæ’æŸ¥æŒ‡å—

---

> ğŸŠ **æ­å–œï¼TimeValue Dockeréƒ¨ç½²æ–¹æ¡ˆå·²å®Œå–„**
>
> ğŸ’ª **ä»å¼€å‘ç¯å¢ƒåˆ°ç”Ÿäº§ç¯å¢ƒï¼Œä¸€é”®æå®šï¼**
>
> ğŸ“š **è¯¦ç»†æ–‡æ¡£**: [DOCKER_DEPLOYMENT.md](DOCKER_DEPLOYMENT.md)
